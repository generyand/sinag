# SINAG API Environment Variables
# Copy this file to .env and fill in your actual values

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
DEBUG=true
ENVIRONMENT=development

# Startup Behavior
# FAIL_FAST=true (default) - Application crashes immediately on startup errors
# FAIL_FAST=false - Application logs warnings but continues (useful for local dev)
# IMPORTANT: Keep FAIL_FAST=true in production to prevent misconfigured deployments!
FAIL_FAST=true

# =============================================================================
# SECURITY SETTINGS (REQUIRED)
# =============================================================================
# SECRET_KEY: Must be at least 32 characters. Generate with: openssl rand -base64 32
SECRET_KEY=your-super-secret-key-here-minimum-32-characters
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080

# =============================================================================
# SUPABASE CONFIGURATION (REQUIRED)
# =============================================================================
# Get these from your Supabase project dashboard: https://app.supabase.com/
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# DATABASE_URL: Use the Pooler connection string (port 6543) for better performance
# Format: postgresql://postgres.[project-ref]:[password]@[region].pooler.supabase.com:6543/postgres
DATABASE_URL=postgresql://postgres.your-ref:password@aws-0-region.pooler.supabase.com:6543/postgres

# =============================================================================
# REDIS / CELERY CONFIGURATION (REQUIRED for background tasks)
# =============================================================================
# Redis is required for Celery background tasks (classification, AI insights)
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Application cache (separate Redis instance for performance isolation)
REDIS_CACHE_URL=redis://localhost:6380/0

# REQUIRE_CELERY: Controls whether Redis/Celery is mandatory
# REQUIRE_CELERY=true (default) - Application fails if Redis is unreachable when FAIL_FAST=true
# REQUIRE_CELERY=false - Redis failures only log warnings (use if background tasks are optional)
# IMPORTANT: Keep REQUIRE_CELERY=true if your app depends on Celery tasks!
REQUIRE_CELERY=true

# =============================================================================
# AI FEATURES (REQUIRED)
# =============================================================================
# GEMINI_API_KEY: Required for AI-powered features (classification, CapDev recommendations, gap analysis)
# Get your API key from: https://makersuite.google.com/app/apikey
# Application will fail to start if not set (when REQUIRE_GEMINI=true)
GEMINI_API_KEY=your-gemini-api-key-here

# REQUIRE_GEMINI: Controls whether Gemini API is mandatory
# REQUIRE_GEMINI=true (default) - Application fails if Gemini is unreachable when FAIL_FAST=true
# REQUIRE_GEMINI=false - Gemini failures only log warnings (AI features will be disabled)
REQUIRE_GEMINI=true

# =============================================================================
# FIRST SUPERUSER (REQUIRED in production)
# =============================================================================
FIRST_SUPERUSER=admin@sinag.dilg.gov.ph
# IMPORTANT: Change this password! In production, must be at least 12 characters
# and cannot be "changethis" (validation will fail)
FIRST_SUPERUSER_PASSWORD=changethis

# =============================================================================
# EXTERNAL USERS (REQUIRED in production)
# =============================================================================
# Default password for external users (e.g., Katuparan Center)
# IMPORTANT: Change this password! Cannot be "changethis" in production
EXTERNAL_USER_DEFAULT_PASSWORD=changethis

# =============================================================================
# CORS CONFIGURATION (REQUIRED in production)
# =============================================================================
# Comma-separated list of allowed origins for CORS
# In development, defaults to localhost:3000/3001 if not set
# In production, this MUST be set explicitly
# Example: BACKEND_CORS_ORIGINS=https://staging.dilg-sinag.tech,https://dilg-sinag.tech
BACKEND_CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# =============================================================================
# CONNECTION REQUIREMENTS
# =============================================================================
# REQUIRE_ALL_CONNECTIONS=true - Both PostgreSQL and Supabase must be connected
# REQUIRE_ALL_CONNECTIONS=false - At least one connection must work
REQUIRE_ALL_CONNECTIONS=true
